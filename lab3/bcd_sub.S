	;FILE - DHRUV/ESD/LAB3/BCD_SUB
	AREA	RESET,CODE,READONLY ;
	EXPORT	__Vectors
__Vectors
	
	DCD 0X10001000
	DCD Reset_Handler

	AREA	mycode,CODE,READONLY
	ENTRY
	EXPORT	Reset_Handler
		
Reset_Handler
	
	LDR R0,=NUM1
	LDR R0,[R0]
	LDR R1,=NUM2
	LDR R1,[R1]
	MOV R7,#8 ; 8 digit counter
	MOV R6,#0 ;  storing result
	MOV R8,#0 ; caryy
	CMP R0,R1
	LDR R11,=RES
	BHS UP
	MOV R4,R1
	MOV R1,R0
	MOV R0,R4
	MOV R12,#0XCC ; R12 IS CC IF ANSWER IS NEGATIVE
UP
	AND R2,R0,#0X0F ; R2,R3 - storing the extracted digit
	AND R3,R1,#0X0F
	LSR R0,#4
	LSR R1,#4
	SUB R9,R2,R8 ; SUBTRACT IF CARRY EXISTS FROM PREV 
	CMP R9,R3

	BGE down
	ADD R9,#0X0A	; ADD 10 IF R2 SMALLER THAN R1
	MOV R8,#1	; CARRY FROM LEFT IF R2 SMALLER THAN R1
	BLT d
down
	MOV r8,#0
d		
	SUB R9,R3
	ORR R6,R9
	ROR R6,#4
	SUB R7,#1
	TEQ R7,#0
	BNE UP
	STR R6,[R11]
STOP
	B STOP
NUM1 DCD 0X1055	
NUM2 DCD 0X757
	AREA	mydata,DATA,READWRITE
RES DCD 0
	END
	